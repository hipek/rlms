<% content_for :col1 do %>
  <%= render :partial => 'menus/admin' -%>
<% end %>

<% content_for :col2 do %>
<h1><%= "User groups" -%></h1>

<p>
   <%= will_paginate @users %>
</p>

<%= form_tag user_groups_path, :method => :get do %>
  <p>
    <%= 'Login'%><br />
    <%= text_field_tag :q, params[:q] %>
    <%= submit_tag 'Filter' %>
  </p>
  <p>
    <%= 'Group'%><br />
    <%= select_tag 'group_id', options_for_select([['All','']] + Group.all_as_pairs, params[:group_id].try(:to_i)), :onchange => "submit();" -%>
  </p>
<% end %>

<table>
  <tr>
    <th><%= "User" -%></th>
    <% @groups.each do |group| %>
      <th><%= group.name -%></th>
    <% end %>
  </tr>
  <% @users.each do |user| %>
    <tr>
      <td><%= user.login %></td>
      <%= render :partial => 'group', :collection => @groups, :locals => {:user => user} %>
    </tr>
  <% end %>
</table>

<p>
   <%= will_paginate @users %>
</p>
<% end %>
